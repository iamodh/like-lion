**ìŠ¤í„°ë”” ì§„í–‰ ì¼ì‹œ**Â : 2024. 10. 4. (ê¸ˆ) 16:00

**ë°œí‘œì**Â : ì˜¤ë™í™˜

**ì°¸ì—¬ì**Â : ê¹€ì€ì„œ, ì¥ìœ ì§„

**ìŠ¤í„°ë”” ì§„í–‰ ë°©ì‹**Â : ë°œí‘œìê°€ ìš”ì•½í•œ ìŠ¤í„°ë”” ì£¼ì œì˜ ë‚´ìš© ë°œí‘œ

**ì›ë³¸ ë§í¬**Â : [https://huchu.link/94yJ1l3](https://huchu.link/94yJ1l3)

---

# ğŸ“–ì±… ë‚´ìš© ìš”ì•½

## ìƒì„±ì í•¨ìˆ˜

ìƒì„±ì í•¨ìˆ˜ë€ `new` ì—°ì‚°ìì™€ í•¨ê»˜ í˜¸ì¶œí•˜ì—¬ ê°ì²´(ì¸ìŠ¤í„´ìŠ¤)ë¥¼ ìƒì„±í•˜ëŠ” í•¨ìˆ˜ë¥¼ ë§í•œë‹¤.

#### ê°ì²´ ë¦¬í„°ëŸ´ì— ì˜í•œ ê°ì²´ ìƒì„± ë°©ì‹ì˜ ë¬¸ì œì 

```
const circle1 = {
  radius: 5,
  getDiameter() {
    return 2 * this.radius;
  },
};

const circle2 = {
  radius: 10,
  getDiameter() {
    return 2 * this.radius;
  },
};
```

ê°ì²´ ë¦¬í„°ëŸ´ì— ì˜í•´ ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” ê²½ìš° í”„ë¡œí¼í‹° êµ¬ì¡°ê°€ ë™ì¼í•¨ì—ë„ ë¶ˆêµ¬í•˜ê³  ë§¤ë²ˆ ê°™ì€ í”„ë¡œí¼í‹°ì™€ ë©”ì„œë“œë¥¼ ê¸°ìˆ í•´ì•¼ í•œë‹¤.

#### ìƒì„±ì í•¨ìˆ˜ì— ì˜í•œ ê°ì²´ ìƒì„± ë°©ì‹ì˜ ì¥ì 

```
function Circle(radius) {
  this.radius = radius;
  this.getDiameter = function () {
    return 2 * this.radius;
  };
}

const circle1 = new Circle(5);
const circle2 = new Circle(10);
```

ê°ì²´ë¥¼ ìƒì„±í•˜ê¸° ìœ„í•œ í…œí”Œë¦¿ ì²˜ëŸ¼ ìƒì„±ì í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ í”„ë¡œí¼í‹° êµ¬ì¡°ê°€ ë™ì¼í•œ ê°ì²´ ì—¬ëŸ¬ê°œë¥¼ ê°„í¸í•˜ê²Œ ìƒì„±í•  ìˆ˜ ìˆë‹¤.

ìƒì„±ì í•¨ìˆ˜ ë‚´ë¶€ì˜ \[\[this\]\]ëŠ” ìƒì„±ì í•¨ìˆ˜ê°€ ìƒì„±í•  ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê°€ë¦¬í‚¨ë‹¤.

#### ìƒì„±ì í•¨ìˆ˜ì˜ ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ê³¼ì •

ìƒì„±ì í•¨ìˆ˜ì˜ ì—­í• ì€ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ëŠ” ê²ƒê³¼ ìƒì„±ëœ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì´ˆê¸°í™”í•˜ëŠ” ê²ƒì´ë‹¤.

ìë°”ìŠ¤í¬ë¦½íŠ¸ ì—”ì§„ì€ ìƒì„±ì í•¨ìˆ˜ ë‚´ì—ì„œ ì•”ë¬µì ì¸ ì²˜ë¦¬ë¥¼ í†µí•´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ê³  ë°˜í™˜í•œë‹¤.

**1\. ì¸ìŠ¤í„´ìŠ¤ ìƒì„±ê³¼ this ë°”ì¸ë”©**

ì•”ë¬µì ìœ¼ë¡œ ë¹ˆ ê°ì²´(ì¸ìŠ¤í„´ìŠ¤)ê°€ ìƒì„±ë˜ê³  thisì— ë°”ì¸ë”©ëœë‹¤.

**2\. ì¸ìŠ¤í„´ìŠ¤ ì´ˆê¸°í™”**

thisì— ë°”ì¸ë”©ë˜ì–´ ìˆëŠ” ì¸ìŠ¤í„´ìŠ¤ì— í”„ë¡œí¼í‹°ë‚˜ ë©”ì„œë“œë¥¼ ì¶”ê°€í•˜ê³ 

ìƒì„±ì í•¨ìˆ˜ê°€ ì¸ìˆ˜ë¡œ ì „ë‹¬ë°›ì€ ì´ˆê¸°ê°’ì„ ì¸ìŠ¤í„´ìŠ¤ í”„ë¡œí¼í‹°ì— í• ë‹¹í•œë‹¤.

**3\. ì¸ìŠ¤í„´ìŠ¤ ë°˜í™˜**

ìƒì„±ì í•¨ìˆ˜ ë‚´ì—ì„œ ëª¨ë“  ì²˜ë¦¬ê°€ ëë‚˜ë©´ ì™„ì„±ëœ ì¸ìŠ¤í„´ìŠ¤ê°€ ë°”ì¸ë”©ëœ thisë¥¼ **ì•”ë¬µì **ìœ¼ë¡œ ë°˜í™˜í•œë‹¤.

```
function Circle(radius) {
  // 1. ì•”ë¬µì ìœ¼ë¡œ ë¹ˆ ê°ì²´ê°€ ìƒì„±ë˜ê³  thisì— ë°”ì¸ë”©ëœë‹¤.

  // 2. thisì— ë°”ì¸ë”©ë˜ì–´ ìˆëŠ” ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì´ˆê¸°í™”í•œë‹¤.
  this.radius = radius;
  this.getDiameter = function () {
    return 2 * this.radius;
  };

  // 3. ì™„ì„±ëœ ì¸ìŠ¤í„´ìŠ¤ê°€ ë°”ì¸ë”©ëœ thisë¥¼ ì•”ë¬µì ìœ¼ë¡œ ë°˜í™˜í•œë‹¤.
}

const circle = new Circle(1);
console.log(circle); // Circle {radius: 1, getDiameter: Æ’}
```

ë§Œì•½ `this`ê°€ ì•„ë‹Œ ë‹¤ë¥¸ ê°ì²´ë¥¼ ëª…ì‹œì ìœ¼ë¡œ ë°˜í™˜í•˜ë©´ `this`ê°€ ë°˜í™˜ë˜ì§€ ëª»í•˜ê³  `return`ë¬¸ì— ëª…ì‹œí•œ ê°ì²´ê°€ ë°˜í™˜ëœë‹¤.

ëª…ì‹œì ìœ¼ë¡œ ì›ì‹œ ê°’ì„ ë°˜í™˜í•˜ë©´ ì›ì‹œ ê°’ ë°˜í™˜ì€ ë¬´ì‹œë˜ê³  ì•”ë¬µì ìœ¼ë¡œ `this`ê°€ ë°˜í™˜ëœë‹¤.

> ìƒì„±ì í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ `return` ë¬¸ì„ ë°˜ë“œì‹œ ìƒëµí•´ì•¼ í•œë‹¤.

## this

thisëŠ” ê°ì²´ ìì‹ ì˜ í”„ë¡œí¼í‹°ë‚˜ ë©”ì„œë“œë¥¼ ì°¸ì¡°í•˜ê¸° ìœ„í•œ ìê¸° ì°¸ì¡° ë³€ìˆ˜ë‹¤.

this ë°”ì¸ë”©ì€ í•¨ìˆ˜ í˜¸ì¶œ ë°©ì‹ì— ë”°ë¼ ë™ì ìœ¼ë¡œ ê²°ì •ëœë‹¤.

| í•¨ìˆ˜ í˜¸ì¶œ ë°©ì‹       | thisê°€ ê°€ë¦¬í‚¤ëŠ” ê°’                     |
| -------------------- | -------------------------------------- |
| ì¼ë°˜ í•¨ìˆ˜ë¡œì„œ í˜¸ì¶œ   | ì „ì—­ ê°ì²´                              |
| ë©”ì„œë“œë¡œì„œ í˜¸ì¶œ      | ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œ ê°ì²´(ë§ˆì¹¨í‘œ ì•ì˜ ê°ì²´) |
| ìƒì„±ì í•¨ìˆ˜ë¡œì„œ í˜¸ì¶œ | ìƒì„±ì í•¨ìˆ˜ê°€ (ë¯¸ë˜ì—) ìƒì„±í•  ì¸ìŠ¤í„´ìŠ¤ |

```
function foo() {
  console.log(this);
}

// ì¼ë°˜ì ì¸ í•¨ìˆ˜ë¡œì„œ í˜¸ì¶œ
foo(); // window

const obj = { foo };

// ë©”ì„œë“œë¡œì„œ í˜¸ì¶œ
obj.foo(); // obj

// ìƒì„±ì í•¨ìˆ˜ë¡œì„œ í˜¸ì¶œ
const inst = new foo(); // inst
```

## í•¨ìˆ˜ì™€ ì¼ë°˜ ê°ì²´ì˜ ì°¨ì´ì 

#### ë‚´ë¶€ ìŠ¬ë¡¯ê³¼ ë‚´ë¶€ ë©”ì„œë“œ

í•¨ìˆ˜ ê°ì²´ëŠ” ì¼ë°˜ ê°ì²´ê°€ ê°€ì§€ê³  ìˆëŠ” ë‚´ë¶€ ìŠ¬ë¡¯ê³¼ ë‚´ë¶€ ë©”ì„œë“œëŠ” ë¬¼ë¡ 

í•¨ìˆ˜ë¡œì„œ ë™ì‘í•˜ê¸° ìœ„í•œ `[[Environment]]`, `[[FormalParameters]]` ë“±ì˜ ë‚´ë¶€ ìŠ¬ë¡¯ê³¼ í•¨ê»˜

í•¨ìˆ˜ê°€ ì¼ë°˜ í•¨ìˆ˜ë¡œì„œ í˜¸ì¶œë  ë•Œì˜`[[Call]]`ê³¼ new ì—°ì‚°ìì™€ í•¨ê»˜ ìƒì„±ì í•¨ìˆ˜ë¡œì„œ í˜¸ì¶œë  ë•Œì˜ `[[Construct]]` ë‚´ë¶€ ë©”ì„œë“œë¥¼ ê°€ì§€ê³  ìˆë‹¤.

í•¨ìˆ˜ ê°ì²´ëŠ” `[[Call]]`, `[[Construct]]` ë‚´ë¶€ ë©”ì„œë“œë¥¼ ê°€ì§€ê³  ìˆëŠ” ì—¬ë¶€ì— ë”°ë¼ callable, constructor, non-constructorë¡œ ë‚˜ëˆ„ì–´ì§„ë‹¤.

> ì¼ë°˜ ê°ì²´ëŠ” í˜¸ì¶œë  ìˆ˜ ì—†ì§€ë§Œ ëª¨ë“  í•¨ìˆ˜ ê°ì²´ëŠ” í˜¸ì¶œì´ ê°€ëŠ¥í•œ callableì´ë‹¤.

#### constructorì™€ non-contstuctorì˜ êµ¬ë¶„

![image](https://github.com/user-attachments/assets/04b65333-0f6a-47d3-bc52-3bff2e48c8e8)

í•¨ìˆ˜ ê°ì²´ëŠ” ìƒì„±ì í•¨ìˆ˜ë¡œì„œ í˜¸ì¶œë  ìˆ˜ ìˆëŠ”ì§€ì— ë”°ë¼ non-constructorê³¼ constructorë¡œ êµ¬ë¶„ëœë‹¤.

- constructor: í•¨ìˆ˜ ì„ ì–¸ë¬¸, í•¨ìˆ˜ í‘œí˜„ì‹, í´ë˜ìŠ¤
- non-constructor: ES6 ë©”ì„œë“œ ì¶•ì•½ í‘œí˜„ìœ¼ë¡œ ì •ì˜ëœ ë©”ì„œë“œ, í™”ì‚´í‘œ í•¨ìˆ˜

constructorëŠ” new ì—°ì‚°ìë¥¼ ë¶™ì—¬ í˜¸ì¶œí•˜ë©´ ìƒì„±ì í•¨ìˆ˜ì²˜ëŸ¼ ë™ì‘í•˜ëŠ” ë°˜ë©´ non-constructorëŠ” ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤.

```
const arrow = () => {};

new arrow(); // TypeErorr: arrow is not a constructor

const obj = {
  x() {},
};

new obj.x(); // TypeError: obj.x is not a constructor
```

## new ì—°ì‚°ì

constructorì¸ í•¨ìˆ˜ì— new ì—°ì‚°ìë¥¼ ì‚¬ìš©í•´ í˜¸ì¶œí•˜ë©´ `[[Call]]`ì´ í˜¸ì¶œë˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ `[[Construct]]`ê°€ í˜¸ì¶œëœë‹¤.

```
function add(x, y) {
  return x + y;
}

let inst = new add();

// í•¨ìˆ˜ê°€ ê°ì²´ë¥¼ ë°˜í™˜í•˜ì§€ ì•Šì•˜ìœ¼ë¯€ë¡œ ë°˜í™˜ë¬¸ì´ ë¬´ì‹œë˜ê³  ë¹ˆ ê°ì²´ê°€ ë°˜í™˜ëœë‹¤.
console.log(inst); // {}
```

ë°˜ëŒ€ë¡œ new ì—°ì‚°ì ì—†ì´ ìƒì„±ì í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´ `[[Construct]]` ëŒ€ì‹  `[[Call]]`ì´ í˜¸ì¶œëœë‹¤.

```
function Circle(radius) {
  this.radius = radius;
  this.getDiameter = function () {
    return this.radius * 2;
  };
}

// new ì—°ì‚°ì ì—†ì´ í˜¸ì¶œ
const circle = Circle(5);

// returní•˜ëŠ” ê°’ì´ ì—†ë‹¤.
console.log(circle); // undefined

// ì¼ë°˜í•¨ìˆ˜ ë‚´ë¶€ì˜ thisëŠ” ì „ì—­ ê°ì²´ windowë¥¼ ê°€ë¦¬í‚¨ë‹¤.
console.log(radius); // 5
console.log(getDiameter()); // 10

circle.getDiameter(); // TypeError: Cannot read property 'getDiameter' of undefined=
```

#### new.target

ìƒì„±ì í•¨ìˆ˜ê°€ new ì—°ì‚°ì ì—†ì´ í˜¸ì¶œë˜ëŠ” ê²½ìš°ë¥¼ ëŒ€ë¹„í•˜ê¸° ìœ„í•œ ë©”íƒ€ í”„ë¡œí¼í‹°ì´ë‹¤.

new.targetì€ new ì—°ì‚°ìì™€ í•¨ê»˜ ìƒì„±ì í•¨ìˆ˜ë¡œì„œ í˜¸ì¶œë˜ë©´ í•¨ìˆ˜ ìì‹ ì„,

ì¼ë°˜ í•¨ìˆ˜ë¡œì„œ í˜¸ì¶œë˜ë©´ undefinedê°€ ëœë‹¤.

```
function Circle(radius) {
    // ì¼ë°˜ í•¨ìˆ˜ë¡œ í˜¸ì¶œ ì‹œ new ì—°ì‚°ìë¥¼ ë¶™ì—¬ ì¬ê·€ í˜¸ì¶œ
    if (!new.target) {
        return new Circle(radius);
    }
    this.radius = radius;
    this.getDiameter = function () {
        return this.radius * 2
    };
}

const circle = Circle(5);
console.log(circle.getDiameter())); // 10
```

ë˜ëŠ” ì¼ë°˜ í•¨ìˆ˜ë¡œ í˜¸ì¶œ ì‹œ ë‚´ë¶€ì˜ thisê°€ ë¯¸ë˜ì— ìƒì„±ë  ê°ì²´ê°€ ì•„ë‹Œ ì „ì—­ ê°ì²´ windowë¥¼ ê°€ë¦¬í‚¨ë‹¤ëŠ” ì ì„ ì´ìš©í•˜ëŠ” ìŠ¤ì½”í”„ ì„¸ì´í”„ ìƒì„±ì íŒ¨í„´ì„ ì‚¬ìš©í•  ìˆ˜ë„ ìˆë‹¤.

```
function Circle(radius) {
    // ì¼ë°˜ í•¨ìˆ˜ë¡œ í˜¸ì¶œ ì‹œ new ì—°ì‚°ìë¥¼ ë¶™ì—¬ ì¬ê·€ í˜¸ì¶œ
    if (!(this instanceof Circle)) {
        return new Circle(radius);
    }
    this.radius = radius;
    this.getDiameter = function () {
        return this.radius * 2
    };
}

const circle = Circle(5);
console.log(circle.getDiameter())); // 10
```

#### ë¹ŒíŠ¸ì¸ ìƒì„±ì í•¨ìˆ˜ì™€ new

Objectì™€ Function ìƒì„±ì í•¨ìˆ˜ëŠ” new ì—°ì‚°ì ì—†ì´ í˜¸ì¶œí•´ë„ new ì—°ì‚°ìì™€ í•¨ê»˜ í˜¸ì¶œí–ˆì„ ë•Œì™€ ê°™ì´ ê°ì²´ë¥¼ ìƒì„±í•˜ì—¬ ë°˜í™˜í•œë‹¤.

í•˜ì§€ë§Œ String, Number, Boolean ìƒì„±ì í•¨ìˆ˜ëŠ” newì™€ í•¨ê»˜ í˜¸ì¶œí–ˆì„ ë•ŒëŠ” ê°ì²´ë¥¼, ì¼ë°˜í•¨ìˆ˜ë¡œì„œ í˜¸ì¶œí–ˆì„ ë•ŒëŠ” ë¬¸ìì—´, ìˆ«ì, ë¶ˆë¦¬ì–¸ ê°’ì„ ë°˜í™˜í•œë‹¤.

ì´ë¥¼ í†µí•´ íƒ€ì…ì„ ë³€í™˜í•˜ê¸°ë„ í•œë‹¤.

```
const obj = new String(123);

console.log(obj); // String {'123'}

const str = String(123);

console.log(str, typeof str); // 123 string
```
